{% load static %}
<!DOCTYPE html>
<html lang="en" data-bs-theme="dark" id="html-root">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Inventory Management{% endblock %}</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        body {
            overflow-x: hidden;
        }
        .sidebar {
            width: 250px;
            min-height: 100vh;
        }
        .theme-toggle {
            cursor: pointer;
        }
    </style>
</head>
<body>
<div class="d-flex">
    <!-- Sidebar -->
    <div class="bg-dark text-white sidebar p-3">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h4 class="mb-0">Dashboard</h4>
            <i id="themeToggle" class="bi bi-moon-fill theme-toggle" title="Toggle theme"></i>
        </div>

        <ul class="nav flex-column">

            <li class="nav-item">
                <a class="nav-link text-white" href="{% url 'dashboard' %}">
                    <i class="bi bi-speedometer2"></i> Dashboard
                </a>
            </li>

            <!-- Inventory -->
            <li class="nav-item">
                <a class="nav-link text-white" data-bs-toggle="collapse" href="#inventoryMenu" role="button" aria-expanded="false">
                    <i class="bi bi-box-seam"></i> Inventory
                </a>
                <div class="collapse ps-3" id="inventoryMenu">
                    <ul class="nav flex-column">
                        <li class="nav-item"><a class="nav-link text-white" href="{% url 'inventory_list_view' %}">View Items</a></li>
                        <li class="nav-item"><a class="nav-link text-white" href="{% url 'inventory_create_view' %}">Add Item</a></li>
                        <li class="nav-item"><a class="nav-link text-white" href="{% url 'upload_inventory' %}">Bulk Update</a></li>
                    </ul>
                </div>
            </li>

            <!-- Purchase Orders -->
            <li class="nav-item">
                <a class="nav-link text-white" data-bs-toggle="collapse" href="#poMenu" role="button" aria-expanded="false">
                    <i class="bi bi-receipt-cutoff"></i> Purchase Orders
                </a>
                <div class="collapse ps-3" id="poMenu">
                    <ul class="nav flex-column">
                        <li class="nav-item"><a class="nav-link text-white" href="{% url 'purchase_order_list' %}">View POs</a></li>
                        <li class="nav-item"><a class="nav-link text-white" href="{% url 'create_purchase_order' %}">Add PO</a></li>
                        <li class="nav-item"><a class="nav-link text-white" href="{% url 'lookup_po' %}">Receive PO</a></li>
                    </ul>
                </div>
            </li>

            <!-- Vendors -->
            <li class="nav-item">
                <a class="nav-link text-white" data-bs-toggle="collapse" href="#vendorMenu" role="button" aria-expanded="false">
                    <i class="bi bi-person-badge"></i> Vendors
                </a>
                <div class="collapse ps-3" id="vendorMenu">
                    <ul class="nav flex-column">
                        <li class="nav-item"><a class="nav-link text-white" href="{% url 'vendor_list_view' %}">View Vendors</a></li>
                        <li class="nav-item"><a class="nav-link text-white" href="{% url 'vendor_create_view' %}">Add Vendor</a></li>
                    </ul>
                </div>
            </li>

            <!-- Role Display -->
            <li class="nav-item mt-4">
                <span class="text-muted small">Role: {{ user_role }}</span>
            </li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="flex-grow-1 p-4">
        {% block content %}
        <!-- Page-specific content goes here -->
        {% endblock %}
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- Dark Mode Toggle Script -->
<script>
    const toggleBtn = document.getElementById('themeToggle');
    const htmlRoot = document.getElementById('html-root');

    function toggleTheme() {
        const currentTheme = htmlRoot.getAttribute('data-bs-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        htmlRoot.setAttribute('data-bs-theme', newTheme);
        toggleBtn.className = newTheme === 'dark' ? 'bi bi-moon-fill theme-toggle' : 'bi bi-sun-fill theme-toggle';
    }

    toggleBtn.addEventListener('click', toggleTheme);
</script>

</body>
</html>
